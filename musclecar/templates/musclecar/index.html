{% load static %}
<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞—Å–ª–∫–∞—Ä—ã –°–®–ê</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', 'Times New Roman', sans-serif;
            margin: 0;
            padding-top: 80px;
            background: #f5f5f5;
        }
    </style>
</head>

<body>
    {% include 'musclecar/navbar.html' %}

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ -->
    <div class="feedback-modal" id="feedbackModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>üì© –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏</h2>
            <form id="feedbackForm" novalidate>
                <div class="form-group">
                    <label for="name">–ò–º—è:</label>
                    <input type="text" id="name" name="name" required placeholder="–í–∞—à–µ –∏–º—è">
                    <span class="error-message"></span>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="fbEmail" name="email" required placeholder="example@domain.com">
                    <span class="error-message"></span>
                </div>
                <div class="form-group">
                    <label for="message">–°–æ–æ–±—â–µ–Ω–∏–µ:</label>
                    <textarea id="message" name="message" required placeholder="–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."></textarea>
                    <span class="error-message"></span>
                </div>
                <button type="submit" class="highlight">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="content">
        <h1 style="border-bottom: 2px solid #ff9900; padding-bottom: 10px; text-align: center;">
            –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –º–∞—Å–ª–∫–∞—Ä—ã –°–®–ê
        </h1>

        <div class="hero-block">
            <img src="https://a.d-cd.net/aAAAAgMUh-A-1920.jpg" loading="lazy" alt="Ford Mustang 1967" class="responsive-image">
            <div class="hero-text">
                <p><em>–ú–∞—Å–ª–∫–∞—Ä—ã</em> ‚Äî —ç—Ç–æ —Å–∏–º–≤–æ–ª –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω–æ–π –∫—É–ª—å—Ç—É—Ä—ã.</p>
                <p>–°–∞–º—ã–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏:<br>
                    <strong>Ford Mustang, Chevrolet Camaro, Dodge Charger</strong>
                </p>
            </div>
        </div>

        <!-- –°–ª–∞–π–¥–µ—Ä —Å –ø–ª–∞–≤–Ω—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ -->
        <div class="slider-container">
            <h2>–ì–∞–ª–µ—Ä–µ—è –º–∞—Å–ª–∫–∞—Ä–æ–≤</h2>
            <div class="slider">
                <div class="slide fade">
                    <img src="https://avatars.mds.yandex.net/i?id=9f478667ba1f69f4854836912a489498_l-3547543-images-thumbs&n=13"
                        alt="Ford Mustang" class="slide-image">
                    <p class="slide-caption">Ford Mustang</p>
                </div>
                <div class="slide fade">
                    <img src="https://i.playground.ru/i/pix/1418060/image.jpg" alt="Chevrolet Camaro"
                        class="slide-image">
                    <p class="slide-caption">Chevrolet Camaro</p>
                </div>
                <div class="slide fade">
                    <img src="https://avatars.mds.yandex.net/i?id=d2480c63510db882d3912bd5df19b6b5_l-8231149-images-thumbs&n=13"
                        alt="Dodge Charger" class="slide-image">
                    <p class="slide-caption">Dodge Charger</p>
                </div>
            </div>
        </div>
        <!-- –í–∏–¥–µ–æ -->
        <div class="video-container">
            <h2>–í–∏–¥–µ–æ–æ–±–∑–æ—Ä</h2>
            <div class="video-wrapper">
                <iframe class="responsive-video" src="https://www.youtube.com/embed/pQ0gso597ng" frameborder="0"
                    allowfullscreen></iframe>
            </div>
        </div>

        <div class="specs-box">
            <h3>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–∞—Å–ª–∫–∞—Ä–æ–≤:</h3>
            <ul class="feature-list">
                <li><span class="highlight">üöó –ú–æ—â–Ω—ã–µ V8 –¥–≤–∏–≥–∞—Ç–µ–ª–∏</span></li>
                <li><span class="highlight">üî• –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω</span></li>
                <li><span class="highlight">üèÅ –ó–∞–¥–Ω–∏–π –ø—Ä–∏–≤–æ–¥</span></li>
            </ul>
        </div>
    </main>

    <a href="#top" class="scroll-top" id="scrollTopBtn" title="–ù–∞–≤–µ—Ä—Ö">
        ‚ñ≤
    </a>
    
    <div id="like-section" class="text-center mt-4">
        <button id="like-button" class="btn btn-success">Like</button>
        <button id="dislike-button" class="btn btn-danger">Dislike</button>
        <p id="like-count">0</p>
    </div>
  
    <script>
        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ WebSocket
        const ws = new WebSocket('ws://' + window.location.host + '/ws/like/');
        
        ws.onmessage = function(e) {
            const data = JSON.parse(e.data);
            if (data.like_count !== undefined) {
                document.getElementById('like-count').textContent = data.like_count;
            }
            console.log("–î–µ–π—Å—Ç–≤–∏–µ:", data.action, "–¥–ª—è –ø–æ—Å—Ç–∞:", data.post_id);
        };

        // –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –ª–∞–π–∫–∞ –∏ –¥–∏–∑–ª–∞–π–∫–∞
        document.getElementById('like-button').addEventListener('click', function() {
            this.classList.add('active');
            ws.send(JSON.stringify({ action: 'like', post_id: 1, toggle: false }));
        });
        document.getElementById('dislike-button').addEventListener('click', function() {
            this.classList.remove('active');
            ws.send(JSON.stringify({ action: 'like', post_id: 1, toggle: true }));
        });
    </script>

    <script src="{% static 'js/script.js' %}"></script>
</body>

</html>
